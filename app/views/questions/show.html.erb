<h1><%= @question.title %></h1>
<p><%= @question.content %></p>
<p>作成者: <%= @question.user.handle_name %></p>

<% if @question.user == current_user %>
  <%= link_to "編集", edit_question_path(@question) %> |
  <%= link_to "削除", question_path(@question), method: :delete, data: { confirm: "本当に削除しますか？" } %>
<% end %>

<h2>回答一覧</h2>
<% if @question.answers.empty? %>
  <p>まだ回答はありません。</p>
<% else %>
  <ul>
    <% @question.answers.each do |a| %>
      <li>
        <%= a.content %> - <%= a.user.handle_name %>
        <% if a.user == current_user %>
          | <%= link_to "編集", edit_question_answer_path(@question, a) %>
          | <%= link_to "削除", question_answer_path(@question, a), method: :delete, data: { confirm: "本当に削除しますか？" } %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>

<h3>回答投稿</h3>
<%= form_with model: [@question, Answer.new], local: true do |f| %>
  <div>
    <%= f.text_area :content, placeholder: "回答を入力", required: true %>
  </div>
  <div>
    <%= f.submit "回答する", class: "button" %>
  </div>
<% end %>
